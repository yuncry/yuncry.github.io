<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>POJ 1703 Find them, Catch them | yuncry</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">POJ 1703 Find them, Catch them</h1><a id="logo" href="/.">yuncry</a><p class="description">You're unique, nothing can replace you.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/history/"><i class="fa fa-book"> History</i></a><a href="/tag/"><i class="fa fa-tags"> Tags</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">POJ 1703 Find them, Catch them</h1><div class="post-meta">Feb 16, 2017<span> | </span><span class="category"><a href="/categories/ACM解题报告/">ACM解题报告</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/02/16/POJ-1703-Find-them-Catch-them/" href="/2017/02/16/POJ-1703-Find-them-Catch-them/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p><strong>DESCRIPTION</strong><br>The police office in Tadu City decides to say ends to the chaos, as launch actions to root up the TWO gangs in the city, Gang Dragon and Gang Snake. However, the police first needs to identify which gang a criminal belongs to. The present question is, given two criminals; do they belong to a same clan? You must give your judgment based on incomplete information. (Since the gangsters are always acting secretly.) </p>
<p>Assume <em>N</em> (N &lt;= 10^5) criminals are currently in Tadu City, numbered from <em>1 to N</em>. And of course, at least one of them belongs to Gang Dragon, and the same for Gang Snake. You will be given <em>M</em> (M &lt;= 10^5) messages in sequence, which are in the following two kinds: </p>
<ol>
<li><p>D [a] [b]<br>where [a] and [b] are the numbers of two criminals, and they belong to different gangs. </p>
</li>
<li><p>A [a] [b]<br>where [a] and [b] are the numbers of two criminals. This requires you to decide whether a and b belong to a same gang. </p>
</li>
</ol>
<p><strong>INPUT</strong><br>The first line of the input contains a single integer <em>T</em> (1 &lt;= T &lt;= 20), the number of test cases. Then <em>T</em> cases follow. Each test case begins with a line with two integers <em>N</em> and <em>M</em>, followed by <em>M</em> lines each containing one message as described above.</p>
<p><strong>OUTPUT</strong><br>For each message “A [a] [b]” in each case, your program should give the judgment based on the information got before. The answers might be one of “In the same gang.”, “In different gangs.” and “Not sure yet.”</p>
<p><strong>SAMPLE</strong><br><em>Input</em><br>1<br>5　 5<br>A 　1　 2<br>D 　1　 2<br>A 　1　 2<br>D 　2 　4<br>A 　1　 4<br><em>Output</em><br>Not sure yet.<br>In different gangs.<br>In the same gang.</p>
<p>题意：某城市有两个帮派“龙帮”和“蛇帮”（从名字上就输了好吗…），警察抓到了N名来自这两个帮派的罪犯。题目会给我信息，告诉我哪两个罪犯不属于同一个帮派。再给出两个罪犯，需要我判断是否属于同一个帮派。</p>
<p>思路：给出一个罪犯的编号<em>i</em>，记<em>i</em>表示该罪犯属于“龙帮”，记<em>i+N</em>表示该罪犯属于“蛇帮”。每当题目给出D[a][b]时，分别记录两种可能情况。利用并查集，同一个集合中的元素同时成立或同时不成立（即合并a与b+N,a+N与b）。最后只要判断两元素是否在同一集合即可。</p>
<p>这道题有个地方需要注意，输入方式比较坑，我用了两次<em>getchar()</em>解决字符和换行符的问题。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">200005</span>;</div><div class="line"><span class="keyword">int</span> par[MAX_N],rank[MAX_N];</div><div class="line"><span class="keyword">int</span> M,N;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span> <span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</div><div class="line">        par[i] = i;</div><div class="line">        rank[i] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span> <span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (par[x] == x)</div><div class="line">        <span class="keyword">return</span> x;</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> par[x] = find(par[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span> <span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    x = find(x);</div><div class="line">    y = find(y);</div><div class="line">    <span class="keyword">if</span> (x == y)  <span class="keyword">return</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (rank[x] &lt; rank[y])</div><div class="line">        par[x] = y;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        par[y] = x;</div><div class="line">        <span class="keyword">if</span> (rank[x] == rank[y])</div><div class="line">            ++rank[x];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">same</span> <span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> find(x) == find(y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">while</span>(T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M);</div><div class="line">        getchar();</div><div class="line">        init(<span class="number">2</span>*N);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; ++i) &#123;</div><div class="line">            <span class="keyword">char</span> c;</div><div class="line">            <span class="keyword">int</span> a, b;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%c%d%d"</span>,&amp;c,&amp;a,&amp;b);</div><div class="line">            getchar();</div><div class="line">            <span class="keyword">if</span> (c == <span class="string">'A'</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (same(a,b))</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"In the same gang.\n"</span>);</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (same(a+N,b))</div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"In different gangs.\n"</span>);</div><div class="line">                <span class="keyword">else</span> </div><div class="line">                    <span class="built_in">printf</span>(<span class="string">"Not sure yet.\n"</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                unite(a,b+N);</div><div class="line">                unite(a+N,b);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>　
　
　</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yuncry.me/2017/02/16/POJ-1703-Find-them-Catch-them/" data-id="cize3551a000c0u76s22bviug" class="article-share-link">Share</a><div class="tags"><a href="/tags/并查集/">并查集</a></div><div class="post-nav"><a href="/2017/02/17/POJ-2139-Six-Degrees-of-Cowvin-Bacon/" class="pre">POJ 2139 Six Degrees of Cowvin Bacon</a><a href="/2017/02/16/POJ-2236-Wireless-Network/" class="next">POJ 2236 Wireless Network</a></div><div id="disqus_thread"><script>var disqus_shortname = 'yuncry';
var disqus_identifier = '2017/02/16/POJ-1703-Find-them-Catch-them/';
var disqus_title = 'POJ 1703 Find them, Catch them';
var disqus_url = 'http://yuncry.me/2017/02/16/POJ-1703-Find-them-Catch-them/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//yuncry.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="https://www.google.com.hk/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Google"/><input type="hidden" name="sitesearch"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ACM解题报告/">ACM解题报告</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/C-Primer/" style="font-size: 15px;">C++ Primer</a> <a href="/tags/二叉搜索树/" style="font-size: 15px;">二叉搜索树</a> <a href="/tags/并查集/" style="font-size: 15px;">并查集</a> <a href="/tags/贪心/" style="font-size: 15px;">贪心</a> <a href="/tags/DP/" style="font-size: 15px;">DP</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/优先队列/" style="font-size: 15px;">优先队列</a> <a href="/tags/最小生成树/" style="font-size: 15px;">最小生成树</a> <a href="/tags/最短路径/" style="font-size: 15px;">最短路径</a> <a href="/tags/心情随笔/" style="font-size: 15px;">心情随笔</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/C-Primer-第十章练习题/">C++ Primer 第十章练习题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/POJ-1797-Heavy-Transportation/">POJ 1797 Heavy Transportation</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/17/POJ-2139-Six-Degrees-of-Cowvin-Bacon/">POJ 2139 Six Degrees of Cowvin Bacon</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/POJ-1703-Find-them-Catch-them/">POJ 1703 Find them, Catch them</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/POJ-2236-Wireless-Network/">POJ 2236 Wireless Network</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/POJ-2010-Moo-UNiversity-Financial-Aid/">POJ 2010 Moo UNiversity-Financial Aid</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/如果可以，让我抱抱你/">如果可以，让我抱抱你</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/POJ-3614-Sunscreen/">POJ 3614 Sunscreen</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/记录图论里的一些常见算法/">记录图论里的一些常见算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/HDU-2845-Beans/">HDU 2845 Beans</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//yuncry.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">yuncry.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>