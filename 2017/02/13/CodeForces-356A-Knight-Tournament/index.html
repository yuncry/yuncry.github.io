<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>CodeForces 356A Knight Tournament | yuncry</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">CodeForces 356A Knight Tournament</h1><a id="logo" href="/.">yuncry</a><p class="description">You're unique, nothing can replace you.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/history/"><i class="fa fa-book"> History</i></a><a href="/tag/"><i class="fa fa-tags"> Tags</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">CodeForces 356A Knight Tournament</h1><div class="post-meta">Feb 13, 2017<span> | </span><span class="category"><a href="/categories/ACM解题报告/">ACM解题报告</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/02/13/CodeForces-356A-Knight-Tournament/" href="/2017/02/13/CodeForces-356A-Knight-Tournament/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p><strong>DESCRIPTION</strong><br>Hooray! Berl II, the king of Berland is making a knight tournament. The king has already sent the message to all knights in the kingdom and they in turn agreed to participate in this grand event.</p>
<p>As for you, you’re just a simple peasant. There’s no surprise that you slept in this morning and were late for the tournament (it was a weekend, after all). Now you are really curious about the results of the tournament. This time the tournament in Berland went as follows:</p>
<ul>
<li>There are n knights participating in the tournament. Each knight was assigned his unique number — an integer from 1 to n.</li>
<li>The tournament consisted of m fights, in the i-th fight the knights that were still in the game with numbers at least li and at most rihave fought for the right to continue taking part in the tournament.</li>
<li>After the i-th fight among all participants of the fight only one knight won — the knight number xi, he continued participating in the tournament. Other knights left the tournament.</li>
<li>The winner of the last (the m-th) fight (the knight number xm) became the winner of the tournament.</li>
</ul>
<p>You fished out all the information about the fights from your friends. Now for each knight you want to know the name of the knight he was conquered by. We think that the knight number b was conquered by the knight number a, if there was a fight with both of these knights present and the winner was the knight number a.</p>
<p>Write the code that calculates for each knight, the name of the knight that beat him.<br>&nbsp;<br>&nbsp;<br><strong>INPUT</strong><br>The first line contains two integers n, m (2 ≤ n ≤ 3·10e5; 1 ≤ m ≤ 3·10e5) — the number of knights and the number of fights. Each of the following m lines contains three integers li, ri, xi (1 ≤ li &lt; ri ≤ n; li ≤ xi ≤ ri) — the description of the i-th fight.<br>&nbsp;<br>&nbsp;<br><strong>OUTPUT</strong><br>Print n integers. If the i-th knight lost, then the i-th number should equal the number of the knight that beat the knight number i. If the i-th knight is the winner, then the i-th number must equal 0.<br>&nbsp;<br>&nbsp;<br><strong>EXAMPLE</strong><br><em>Input</em><br>4 3<br>1 2 1<br>1 3 3<br><em>Output</em><br>3 1 4 0</p>
<p><em>Input</em><br>8 4<br>3 5 4<br>3 7 6<br>2 8 8<br>1 8 1<br><em>Output</em><br>0 8 4 6 4 8 6 1</p>
<p>首先把题目意思搞懂：有N个人参加比赛，共M场比赛，每次比赛给出 <em>l, r, x</em> 表示 <em>[l,r]</em> 区间内的人都被x打败。最后输入每个人是被谁打败的，冠军输出0 。</p>
<p>读懂题意后，我最先想到的就是暴力思路，维护一个数组，数组下标为某选手，其值为击败该选手的人。每次遍历 <em>l-r</em> ,更新这个数组。<br><em>然而TLE…</em><br>上述方法的复杂度是O(N*M)(每次都给出最大的l-r区间），N和M值都很大，因此为了降低复杂度，想到用<em>set</em>来维护这个集合。</p>
<p>set有个酷炫的函数<em>lower_bound(i)</em>,可以直接返回指向第一个大于等于i的值的迭代器，复杂度为O(logn)</p>
<p>开始时把所有人都加进<em>set</em>集合内，每轮比赛过后从<em>set</em>中删除被淘汰的人。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">300005</span>;</div><div class="line"><span class="keyword">int</span> beatBy[MAX_N],leave[MAX_N];</div><div class="line"><span class="keyword">int</span> N,M;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M);</div><div class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; s;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=N; ++i) &#123;</div><div class="line">        s.insert(i);</div><div class="line">        beatBy[i] = <span class="number">0</span>;</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">while</span> (M--) &#123;</div><div class="line">        <span class="keyword">int</span> l,r,x,cnt=<span class="number">0</span>;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;l,&amp;r,&amp;x);</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator it=s.lower_bound(l); it!=s.end() &amp;&amp; *it&lt;=r; ++it) &#123;</div><div class="line">            <span class="keyword">if</span> (*it != x) &#123;</div><div class="line">                beatBy[*it] = x;</div><div class="line">                leave[cnt++] = *it;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;cnt; ++j)</div><div class="line">            s.erase(leave[j]);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=N; ++i)</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,beatBy[i]);</div><div class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yuncry.me/2017/02/13/CodeForces-356A-Knight-Tournament/" data-id="ciz7yxl4d0008v676qr8egi1c" class="article-share-link">Share</a><div class="tags"><a href="/tags/二叉搜索树/">二叉搜索树</a></div><div class="post-nav"><a href="/2017/02/14/CodeForces-744A-Hongcow-Builds-A-Nation/" class="pre">CodeForces 744A Hongcow Builds A Nation</a><a href="/2016/11/13/C-Primer-第十二章练习题/" class="next">C++ Primer 第十二章练习题</a></div><div id="disqus_thread"><script>var disqus_shortname = 'yuncry';
var disqus_identifier = '2017/02/13/CodeForces-356A-Knight-Tournament/';
var disqus_title = 'CodeForces 356A Knight Tournament';
var disqus_url = 'http://yuncry.me/2017/02/13/CodeForces-356A-Knight-Tournament/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//yuncry.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="https://www.google.com.hk/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Google"/><input type="hidden" name="sitesearch"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ACM解题报告/">ACM解题报告</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/C-Primer/" style="font-size: 15px;">C++ Primer</a> <a href="/tags/最短路径/" style="font-size: 15px;">最短路径</a> <a href="/tags/并查集/" style="font-size: 15px;">并查集</a> <a href="/tags/贪心/" style="font-size: 15px;">贪心</a> <a href="/tags/二叉搜索树/" style="font-size: 15px;">二叉搜索树</a> <a href="/tags/DP/" style="font-size: 15px;">DP</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/优先队列/" style="font-size: 15px;">优先队列</a> <a href="/tags/最小生成树/" style="font-size: 15px;">最小生成树</a> <a href="/tags/心情随笔/" style="font-size: 15px;">心情随笔</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/POJ-2236-Wireless-Network/">POJ 2236 Wireless Network</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/POJ-2010-Moo-UNiversity-Financial-Aid/">POJ 2010 Moo UNiversity-Financial Aid</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/如果可以，让我抱抱你/">如果可以，让我抱抱你</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/POJ-3614-Sunscreen/">POJ 3614 Sunscreen</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/记录图论里的一些常见算法/">记录图论里的一些常见算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/HDU-2845-Beans/">HDU 2845 Beans</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/CodeForces-601A-The-Two-Routes/">CodeForces 601A The Two Routes</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/CodeForces-744A-Hongcow-Builds-A-Nation/">CodeForces 744A Hongcow Builds A Nation</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/13/CodeForces-356A-Knight-Tournament/">CodeForces 356A Knight Tournament</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/13/C-Primer-第十二章练习题/">C++ Primer 第十二章练习题</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//yuncry.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">yuncry.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>