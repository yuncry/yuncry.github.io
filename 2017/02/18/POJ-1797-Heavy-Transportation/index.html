<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>POJ 1797 Heavy Transportation | yuncry</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">POJ 1797 Heavy Transportation</h1><a id="logo" href="/.">yuncry</a><p class="description">You're unique, nothing can replace you.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/history/"><i class="fa fa-book"> History</i></a><a href="/tag/"><i class="fa fa-tags"> Tags</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">POJ 1797 Heavy Transportation</h1><div class="post-meta">Feb 18, 2017<span> | </span><span class="category"><a href="/categories/ACM解题报告/">ACM解题报告</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/02/18/POJ-1797-Heavy-Transportation/" href="/2017/02/18/POJ-1797-Heavy-Transportation/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p><strong>DESCRIPTION</strong><br>Background<br>Hugo Heavy is happy. After the breakdown of the Cargolifter project he can now expand business. But he needs a clever man who tells him whether there really is a way from the place his customer has build his giant steel crane to the place where it is needed on which all streets can carry the weight.<br>Fortunately he already has a plan of the city with all streets and bridges and all the allowed weights.Unfortunately he has no idea how to find the the maximum weight capacity in order to tell his customer how heavy the crane may become. But you surely know. </p>
<p>Problem<br>You are given the plan of the city, described by the streets (with weight limits) between the crossings, which are numbered from 1 to n. Your task is to find the maximum weight that can be transported from crossing 1 (Hugo’s place) to crossing n (the customer’s place). You may assume that there is at least one path. All streets can be travelled in both directions.</p>
<p><strong>INPUT</strong><br>The first line contains the number of scenarios (city plans). For each city the number <em>n</em> of street crossings (1 &lt;= n &lt;= 1000) and number <em>m</em> of streets are given on the first line. The following m lines contain triples of integers specifying start and end crossing of the street and the maximum allowed weight, which is positive and not larger than 1000000. There will be at most one street between each pair of crossings.</p>
<p><strong>OUTPUT</strong><br>The output for every scenario begins with a line containing “Scenario #i:”, where i is the number of the scenario starting at 1. Then print a single line containing the maximum allowed weight that Hugo can transport to the customer. Terminate the output for the scenario with a blank line.</p>
<p><strong>SAMPLE</strong><br><em>Input</em><br>1<br>3 　3<br>1 　2　 3<br>1 　3 　4<br>2 　3　 5<br><em>Output</em><br>Scenario #1:<br>4</p>
<p>题意：运送货物。总共有N个城市，M条道路，每条道路都有最大承重量。找一条1到N的路径，在货物重量不超过道路的最大承重量的情况下，使货物重量尽可能的大。</p>
<p>思路：我最开始想到的方法是Dijkstra,变形一下，改变d[i]的意义来做这道题。这道题若用Dijkstra来解，d[i]表示从城市1到城市n中所有可行路径中最小权值边的最大值（比如map[1][2]=2,map[2][3]=4,map[1][3]=3,则d[3]＝3）。先贴出实现代码。需要注意一下d[1]的值。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">1005</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e9</span>;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; iiP;</div><div class="line"><span class="keyword">int</span> <span class="built_in">map</span>[MAX_N][MAX_N];</div><div class="line"><span class="keyword">int</span> d[MAX_N];</div><div class="line"><span class="keyword">int</span> N,M,T;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</div><div class="line">    <span class="built_in">memset</span>(d,<span class="number">0</span>,<span class="keyword">sizeof</span>(d));</div><div class="line">    priority_queue&lt;iiP&gt; que;</div><div class="line">    d[s] = INF;</div><div class="line">    que.push(iiP(INF,s));</div><div class="line">    </div><div class="line">    <span class="keyword">while</span>(!que.empty()) &#123;</div><div class="line">        iiP now = que.top();</div><div class="line">        que.pop();</div><div class="line">        <span class="keyword">int</span> v = now.second;</div><div class="line">        <span class="keyword">if</span> (d[v] &gt; now.first) <span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span> (d[i] &lt; min(d[v],<span class="built_in">map</span>[v][i])) &#123;</div><div class="line">                d[i] = min(d[v],<span class="built_in">map</span>[v][i]);</div><div class="line">                que.push(iiP(d[i],i));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; ++t) &#123;</div><div class="line">        <span class="built_in">memset</span>(<span class="built_in">map</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="built_in">map</span>));</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;M; ++k) &#123;</div><div class="line">            <span class="keyword">int</span> a,b,c;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</div><div class="line">            <span class="built_in">map</span>[a][b] = <span class="built_in">map</span>[b][a] = c;</div><div class="line">        &#125;</div><div class="line">        Dijkstra(<span class="number">1</span>);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Scenario #%d:\n%d\n\n"</span>,t,d[N]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="nbsp"><a href="#nbsp" class="headerlink" title="&nbsp;"></a>&nbsp;</h2><p>虽然AC了，但是写代码的过程中觉得思路有点绕，不够清晰，而且因为初始值设置不对或者判断条件不对WA了很多发。后来觉得用最小（大）生成树来解这道题会更直白清晰。利用Kruskal，按各条路的最大承重量从大到小排列，依次加入并查集，每次判断1和N是否在一个集合，若是，则当前边权值为答案。（此处RE过一次，边数组开小了）<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_N = <span class="number">1005</span>;</div><div class="line"><span class="keyword">struct</span> Edge &#123;</div><div class="line">    <span class="keyword">int</span> u,v,len;</div><div class="line">&#125;es[MAX_N*MAX_N];</div><div class="line"><span class="keyword">int</span> N,M;</div><div class="line"><span class="keyword">int</span> par[MAX_N];</div><div class="line"><span class="keyword">int</span> grade[MAX_N];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span> <span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</div><div class="line">        par[i] = i;</div><div class="line">        grade[i] = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span> <span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (x == par[x])</div><div class="line">        <span class="keyword">return</span> x;</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> par[x] = find(par[x]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span> <span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">     x = find(x);</div><div class="line">     y = find(y);</div><div class="line">    <span class="keyword">if</span> (x==y)  <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span> (grade[x] &lt; grade[y])</div><div class="line">        par[x] = y;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        par[y] = x;</div><div class="line">        <span class="keyword">if</span> (grade[x] == grade[y])</div><div class="line">            ++grade[x];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">same</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123; <span class="keyword">return</span> find(x)==find(y); &#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">EdgeCmp</span> <span class="params">(Edge &amp;e1, Edge &amp;e2)</span> </span>&#123; <span class="keyword">return</span> e1.len &gt; e2.len; &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kruskal</span> <span class="params">()</span> </span>&#123;</div><div class="line">    sort(es,es+M,EdgeCmp);</div><div class="line">    init(N);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; ++i) &#123;</div><div class="line">        Edge &amp;e = es[i];</div><div class="line">        <span class="keyword">if</span> (!same(e.v,e.u)) &#123;</div><div class="line">            unite(e.v,e.u);</div><div class="line">            <span class="keyword">if</span> (same(<span class="number">1</span>,N))</div><div class="line">                <span class="keyword">return</span> e.len;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">1</span>; t&lt;=T; ++t) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>; m&lt;M; ++m)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;es[m].u, &amp;es[m].v, &amp;es[m].len);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Scenario #%d:\n%d\n\n"</span>,t,Kruskal());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;<br>&nbsp;</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yuncry.me/2017/02/18/POJ-1797-Heavy-Transportation/" data-id="cizo9bajw000kxo767ejn144v" class="article-share-link">Share</a><div class="tags"><a href="/tags/最短路径/">最短路径</a><a href="/tags/并查集/">并查集</a><a href="/tags/最小生成树/">最小生成树</a></div><div class="post-nav"><a href="/2017/02/20/C-Primer-第十章练习题/" class="pre">C++ Primer 第十章练习题</a><a href="/2017/02/17/POJ-2139-Six-Degrees-of-Cowvin-Bacon/" class="next">POJ 2139 Six Degrees of Cowvin Bacon</a></div><div id="disqus_thread"><script>var disqus_shortname = 'yuncry';
var disqus_identifier = '2017/02/18/POJ-1797-Heavy-Transportation/';
var disqus_title = 'POJ 1797 Heavy Transportation';
var disqus_url = 'http://yuncry.me/2017/02/18/POJ-1797-Heavy-Transportation/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//yuncry.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="https://www.google.com.hk/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Google"/><input type="hidden" name="sitesearch"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ACM解题报告/">ACM解题报告</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithms/">Algorithms</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/C-Primer/" style="font-size: 15px;">C++ Primer</a> <a href="/tags/最短路径/" style="font-size: 15px;">最短路径</a> <a href="/tags/二叉搜索树/" style="font-size: 15px;">二叉搜索树</a> <a href="/tags/并查集/" style="font-size: 15px;">并查集</a> <a href="/tags/贪心/" style="font-size: 15px;">贪心</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/DP/" style="font-size: 15px;">DP</a> <a href="/tags/最小生成树/" style="font-size: 15px;">最小生成树</a> <a href="/tags/优先队列/" style="font-size: 15px;">优先队列</a> <a href="/tags/心情随笔/" style="font-size: 15px;">心情随笔</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/23/C-Primer-第十三章练习题/">C++ Primer 第十三章练习题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/C-Primer-第十章练习题/">C++ Primer 第十章练习题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/POJ-1797-Heavy-Transportation/">POJ 1797 Heavy Transportation</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/17/POJ-2139-Six-Degrees-of-Cowvin-Bacon/">POJ 2139 Six Degrees of Cowvin Bacon</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/17/如果可以，让我抱抱你/">如果可以，让我抱抱你</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/POJ-1703-Find-them-Catch-them/">POJ 1703 Find them, Catch them</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/POJ-2236-Wireless-Network/">POJ 2236 Wireless Network</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/POJ-2010-Moo-UNiversity-Financial-Aid/">POJ 2010 Moo UNiversity-Financial Aid</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/15/POJ-3614-Sunscreen/">POJ 3614 Sunscreen</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/记录图论里的一些常见算法/">记录图论里的一些常见算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//yuncry.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">yuncry.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>